# –ú–µ–ª–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (backlog)

–ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ —Ä–µ–≤—å—é. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å "–ì–æ—Ç–æ–≤–æ".

---

## Stage 1

### 1. `manifest.webmanifest` ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç—å `purpose`
- **–§–∞–π–ª:** `static/manifest.webmanifest`
- **–°—É—Ç—å:** –°–µ–π—á–∞—Å `"purpose": "any maskable"` –Ω–∞ –æ–¥–Ω–æ–π –∏–∫–æ–Ω–∫–µ. Maskable-–∏–∫–æ–Ω–∫–∏ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è (safe zone 80%), –ø–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –∏–º–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏: –æ–¥–Ω—É —Å `"purpose": "any"`, –¥—Ä—É–≥—É—é —Å `"purpose": "maskable"` (—Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º padding).
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Fix Review #2 (13.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –†–∞–∑–¥–µ–ª–∏–ª `purpose` –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ `any`/`maskable` –¥–ª—è PNG-–∏–∫–æ–Ω–æ–∫ –≤ `static/manifest.webmanifest`, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è maskable-–∏–∫–æ–Ω–æ–∫.

### 2. `vitest.config.ts` ‚Äî –Ω–µ—Ç `$lib` alias
- **–§–∞–π–ª:** `vitest.config.ts`
- **–°—É—Ç—å:** –ö–æ–Ω—Ñ–∏–≥ Vitest –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç `$lib` alias –∏–∑ SvelteKit. –°–µ–π—á–∞—Å —Ç–µ—Å—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º—É –ø—É—Ç–∏ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç. –ù–æ –µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è —Ç–µ—Å—Ç—ã —Å `import ... from '$lib/...'`, –æ–Ω–∏ —Å–ª–æ–º–∞—é—Ç—Å—è. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å resolve aliases –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@sveltejs/kit/vite`.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Fix Review #2 (13.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –î–æ–±–∞–≤–∏–ª alias `$lib` –≤ `vitest.config.ts`, —á—Ç–æ–±—ã –±—É–¥—É—â–∏–µ —Ç–µ—Å—Ç—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –≤–∏–¥–∞ `$lib/...` –Ω–µ –ª–æ–º–∞–ª–∏—Å—å.

---

## Stage 1.5

### 3. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è `extractImage`
- **–§–∞–π–ª:** `src/lib/server/news-utils.ts`
- **–°—É—Ç—å:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `extractImage` –Ω–µ –ø–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏. –°–æ–¥–µ—Ä–∂–∏—Ç regex-–ø–∞—Ä—Å–∏–Ω–≥ –∏ –ª–æ–≥–∏–∫—É —Å media:content ‚Äî —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 1.5 Review (14.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –î–æ–±–∞–≤–∏–ª —Ç–µ—Å—Ç—ã `extractImage` –≤ `src/lib/server/news-utils.test.ts` (enclosure, media:content object/array, single quotes, no-image fallback).

### 4. –û–ø–µ—á–∞—Ç–∫–∞ –≤ JSDoc: "enclave" ‚Üí "enclosure"
- **–§–∞–π–ª:** `src/lib/server/news-utils.ts:32`
- **–°—É—Ç—å:** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≥–æ–≤–æ—Ä–∏—Ç `enclave.url` ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `enclosure.url`.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 1.5 Review (14.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –í `src/lib/server/news-utils.ts` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–ø–µ—á–∞—Ç–∫–∞ JSDoc: `enclave` ‚Üí `enclosure`.

### 5. `extractImage` regex –Ω–µ –ª–æ–≤–∏—Ç –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏
- **–§–∞–π–ª:** `src/lib/server/news-utils.ts:53`
- **–°—É—Ç—å:** Regex `/<img[^>]+src="([^">]+)"/i` –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç `<img src='url'>`. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `/<img[^>]+src=["']([^"'>]+)["']/i`
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 1.5 Review (14.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. Regex –≤ `extractImage` –æ–±–Ω–æ–≤–ª—ë–Ω –¥–æ `["']...["']`, —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–æ–π–Ω—ã–µ –∏ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏.

### 6. setInterval –Ω–∞ —Å–∫—Ä—ã—Ç—ã—Ö —á–∞—Å–∞—Ö
- **–§–∞–π–ª:** `src/routes/+page.svelte:32-34`
- **–°—É—Ç—å:** –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç `now` –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É, —Ö–æ—Ç—è —á–∞—Å—ã —Å–∫—Ä—ã—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (`hidden md:block`). –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 1.5 Review (14.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É–º–µ–Ω—å—à–µ–Ω –¥–æ 1 –º–∏–Ω—É—Ç—ã (`60_000`), —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä—ã—Ç–æ–º –Ω–∞ mobile –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ.

### 7. Optional `content` —Å `{@html}`
- **–§–∞–π–ª:** `src/lib/types.ts:9`, `src/routes/news/[id]/+page.svelte:89`
- **–°—É—Ç—å:** `content?: string` ‚Äî optional. –ï—Å–ª–∏ `undefined`, `{@html item.content}` –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç `"undefined"`. –ù—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–ª–∏ default.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 1.5 Review (14.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (14.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –í `src/routes/news/[id]/+page.svelte` –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–π fallback `safeContent = item.content ?? ''` –ø–µ—Ä–µ–¥ `{@html}`.

---

## Stage 2

### 8. –¢–∞–π–º–∞—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω –º–µ–∂–¥—É config.ts –∏ RssSource
- **–§–∞–π–ª—ã:** `src/lib/server/config.ts:12`, `src/lib/server/sources/rss-source.ts:30`
- **–°—É—Ç—å:** `config.ts` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `RSS_TIMEOUT_MS = 8_000`, –Ω–æ `RssSource` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π default `options.timeoutMs ?? 8_000`. –ï—Å–ª–∏ –ø–æ–º–µ–Ω—è—Ç—å config ‚Äî RssSource –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í `rss-source.ts` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `RSS_TIMEOUT_MS` –∏–∑ config.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –í `src/lib/server/sources/rss-source.ts` –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `RSS_TIMEOUT_MS` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞.

### 9. Dead code ‚Äî SITE_URL –≤ sitemap.xml
- **–§–∞–π–ª:** `src/routes/sitemap.xml/+server.ts:4`
- **–°—É—Ç—å:** `const SITE_URL = 'https://technews.dmitry.art'` ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∞, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `SITE_URL` —É–¥–∞–ª–µ–Ω–∞.

### 10. Canonical URL –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω
- **–§–∞–π–ª:** `src/routes/+page.svelte`
- **–°—É—Ç—å:** –î–æ–º–µ–Ω `https://technews.dmitry.art/` –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ canonical link. –ü—Ä–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞ –∏–ª–∏ –≤ dev ‚Äî –±—É–¥–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–º.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. Canonical URL —Ç–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞.

### 11. CSP: unsafe-inline ‚Üí nonce (—Ç–µ—Ö–¥–æ–ª–≥ –¥–ª—è Stage 5)
- **–§–∞–π–ª:** `src/hooks.server.ts:18`
- **–°—É—Ç—å:** `script-src 'self' 'unsafe-inline'` —Å–Ω–∏–∂–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç XSS. –ù—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ nonce-based CSP —á–µ—Ä–µ–∑ `%sveltekit.nonce%`.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ (–æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ Stage 5)

### 12. createNewsSources() –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
- **–§–∞–π–ª—ã:** `src/lib/server/news-service.ts:183,239`
- **–°—É—Ç—å:** –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã RssSource –ø—Ä–∏ –∫–∞–∂–¥–æ–º fetchAllNews() –∏ getServiceStatus(). –°—Ç–æ–∏—Ç —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∫–∞–∫ singleton –≤ module scope.

### 13. Epoch-–¥–∞—Ç—ã –≤ sitemap
- **–§–∞–π–ª:** `src/routes/sitemap.xml/+server.ts:27`
- **–°—É—Ç—å:** –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ pubDate –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ `1970-01-01` –≤ lastmod. –ù—É–∂–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 2 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ Stage 3)

---

## Stage 3

### 14. `DEFAULT_DATABASE_URL` —Å –ø–∞—Ä–æ–ª–µ–º –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö
- **–§–∞–π–ª:** `src/lib/server/db/index.ts:6-7`
- **–°—É—Ç—å:** `postgresql://technews:dev_password@localhost:5432/technews` ‚Äî dev-–ø–∞—Ä–æ–ª—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω. –õ—É—á—à–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ `DATABASE_URL` –Ω–µ –∑–∞–¥–∞–Ω.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 3 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –î–µ—Ñ–æ–ª—Ç–Ω—ã–π URL —É–¥–∞–ª—ë–Ω, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `env.DATABASE_URL`.

### 15. `isFeedSourceExistsByName` ‚Äî –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- **–§–∞–π–ª:** `src/lib/server/db/news-repository.ts:170-184`
- **–°—É—Ç—å:** –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ó–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 3 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞.

### 16. `dev-scheduler.ts` ‚Äî `setInterval` –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è
- **–§–∞–π–ª:** `src/lib/server/jobs/dev-scheduler.ts:70-72`
- **–°—É—Ç—å:** –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞. –î–ª—è dev ‚Äî –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —Ñ–ª–∞–≥—É.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 3 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ `clearInterval` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ HMR.

### 17. –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω `content_snippet` ‚Äî varchar(500) vs MAX_SNIPPET_LENGTH=300
- **–§–∞–π–ª—ã:** `src/lib/server/db/schema.ts:39`, `src/lib/server/config.ts:13`
- **–°—É—Ç—å:** –°—Ö–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç 500 —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ–¥ –æ–±—Ä–µ–∑–∞–µ—Ç –¥–æ 300.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 3 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Antigravity (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. `MAX_SNIPPET_LENGTH` —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 500.

---

## Stage 4

### 18. –î–≤–æ–π–Ω–æ–π –∏–º–ø–æ—Ä—Ç config –≤ cf-translator –∏ libre-translator
- **–§–∞–π–ª—ã:** `src/lib/server/services/cf-translator.ts:1`, `src/lib/server/services/libre-translator.ts:1`
- **–°—É—Ç—å:** Translator-—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∫–æ–Ω—Ñ–∏–≥ –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, —Ö–æ—Ç—è `createTranslationService()` —É–∂–µ –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–Ω–∞—á–µ–Ω–∏—è —è–≤–Ω–æ. –î–≤–æ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –∏–º–ø–æ—Ä—Ç –∏–∑ translator-–æ–≤, —Å–¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 19. Dead code ‚Äî `buildGlossaryInstruction()`
- **–§–∞–π–ª:** `src/lib/server/services/glossary.ts:79-85`
- **–°—É—Ç—å:** –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–æ–º–µ—Ç–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –¥–ª—è Stage 7.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 20. `protectGlossaryTerms` ‚Äî –¥–≤–æ–π–Ω–æ–π –ø—Ä–æ—Ö–æ–¥ –ø–æ —Å—Ç—Ä–æ–∫–µ
- **–§–∞–π–ª:** `src/lib/server/services/glossary.ts:57-58`
- **–°—É—Ç—å:** `pattern.test()` + `replace()` ‚Äî –¥–≤–∞ –ø–æ–ª–Ω—ã—Ö –ø—Ä–æ—Ö–æ–¥–∞. –ú–æ–∂–Ω–æ –æ–¥–∏–Ω `replace` + –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 21. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è CloudflareTranslator
- **–§–∞–π–ª:** `src/lib/server/services/translation-service.test.ts`
- **–°—É—Ç—å:** –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏ (—Ç–æ–ª—å–∫–æ LibreTranslator –∏ Chain).
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 22. –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª¬ª ‚Äî –Ω–µ—Ç aria-pressed
- **–§–∞–π–ª:** `src/routes/news/[id]/+page.svelte:98-103`
- **–°—É—Ç—å:** Toggle-–∫–Ω–æ–ø–∫–∞ –±–µ–∑ `aria-pressed` –¥–ª—è screen readers.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 23. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ–æ—Ç–ª–∏—á–∏–º –æ—Ç —Ä—É—Å—Å–∫–æ–≥–æ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- **–§–∞–π–ª:** `src/lib/components/NewsCard.svelte:12`
- **–°—É—Ç—å:** –ü–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ –∏ —Ä—É—Å—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π üá∑üá∫. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–ª–∏—á–∏—Ç –º–∞—à–∏–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–ª—è –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `üá¨üáß‚Üíüá∑üá∫` –∏–ª–∏ –∏–∫–æ–Ω–∫—É –ø–µ—Ä–µ–≤–æ–¥–∞.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Stage 4 Review (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç–æ

### 24. `/api/health` –ø–∞–¥–∞–µ—Ç –Ω–∞ `toISOString()` –¥–ª—è `latestArticleAt`
- **–§–∞–π–ª:** `src/routes/api/health/+server.ts:17`
- **–°—É—Ç—å:** –ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –∏–∑-–∑–∞ –≤—ã–∑–æ–≤–∞ `toISOString()` –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–µ –∫–∞–∫ `Date` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫–∞ –∏–∑ –ë–î). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ health-check –æ—Ç–¥–∞—ë—Ç `{ status: 'error' }`, —Ö–æ—Ç—è –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å `latestArticleAt` –≤ `Date` –ø–µ—Ä–µ–¥ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å type guard/–ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ `instanceof Date`.
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Runtime check (15.02.2026)
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ
- **–ü—Ä–∏–ø–∏—Å–∫–∞ Codex (15.02.2026):** –ò—Å–ø—Ä–∞–≤–∏–ª. –í `src/lib/server/db/news-repository.ts` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è `toNullableDate(...)` –¥–ª—è `latest_article_at`, –ø–æ—Å–ª–µ —á–µ–≥–æ `GET /api/health` —Å–Ω–æ–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `status: ok`.
